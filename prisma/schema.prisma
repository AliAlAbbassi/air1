generator client {
  provider = "prisma-client-py"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Lead {
  leadId          BigInt            @id @default(autoincrement()) @map("lead_id")
  firstName       String?           @map("first_name") @db.VarChar(255)
  fullName        String?           @map("full_name") @db.VarChar(255)
  email           String?           @unique @db.VarChar(255)
  phoneNumber     String?           @map("phone_number") @db.VarChar(255)
  createdOn       DateTime          @default(now()) @map("created_on") @db.Timestamp(6)
  updatedOn       DateTime          @default(now()) @updatedAt @map("updated_on") @db.Timestamp(6)
  contact_point   contact_point[]
  linkedinProfile LinkedinProfile[]

  @@map("lead")
}

model LinkedinProfile {
  linkedinProfileId  BigInt                  @id @default(autoincrement()) @map("linkedin_profile_id")
  leadId             BigInt?                 @map("lead_id")
  username           String                  @unique @db.VarChar(255)
  location           String?
  headline           String?
  about              String?
  createdOn          DateTime                @default(now()) @map("created_on") @db.Timestamp(6)
  updatedOn          DateTime                @default(now()) @updatedAt @map("updated_on") @db.Timestamp(6)
  companyMemberships LinkedinCompanyMember[]
  lead               Lead?                   @relation(fields: [leadId], references: [leadId], onDelete: NoAction, onUpdate: NoAction)

  @@index([headline(ops: raw("gin_trgm_ops"))], map: "idx_linkedin_profile_headline_gin", type: Gin)
  @@index([leadId], map: "idx_linkedin_profile_lead_id")
  @@index([username], map: "idx_linkedin_profile_username_btree")
  @@map("linkedin_profile")
}

model LinkedinCompanyMember {
  companyMemberId   BigInt           @id @default(autoincrement()) @map("company_member_id")
  linkedinProfileId BigInt?          @map("linkedin_profile_id")
  username          String           @db.VarChar(255)
  title             String?          @db.VarChar(255)
  createdOn         DateTime         @default(now()) @map("created_on") @db.Timestamp(6)
  updatedOn         DateTime         @default(now()) @updatedAt @map("updated_on") @db.Timestamp(6)
  joined_at         DateTime?        @db.Date
  linkedinProfile   LinkedinProfile? @relation(fields: [linkedinProfileId], references: [linkedinProfileId], onDelete: NoAction, onUpdate: NoAction)

  @@unique([linkedinProfileId, username], map: "unique_profile_company")
  @@map("linkedin_company_members")
}

model alembic_version {
  version_num String @id(map: "alembic_version_pkc") @db.VarChar(32)
}

model contact_point {
  contact_point_id      BigInt               @id @default(autoincrement())
  lead_id               BigInt?
  contact_point_type_id BigInt?
  created_on            DateTime             @default(now()) @db.Timestamp(6)
  updated_on            DateTime             @default(now()) @db.Timestamp(6)
  contact_point_types   contact_point_types? @relation(fields: [contact_point_type_id], references: [contact_point_types_id], onDelete: NoAction, onUpdate: NoAction)
  lead                  Lead?                @relation(fields: [lead_id], references: [leadId], onDelete: NoAction, onUpdate: NoAction)
}

model contact_point_types {
  contact_point_types_id BigInt          @id @default(autoincrement())
  contact_point_type     String          @db.VarChar(255)
  created_on             DateTime        @default(now()) @db.Timestamp(6)
  updated_on             DateTime        @default(now()) @db.Timestamp(6)
  contact_point          contact_point[]
}

model Company {
  companyId         BigInt            @id @default(autoincrement()) @map("company_id")
  name              String            @db.VarChar(255)
  linkedinUsername  String?           @unique @map("linkedin_username") @db.VarChar(255)
  website           String?           @db.VarChar(255)
  industry          String?           @db.VarChar(255)
  size              String?           @db.VarChar(50)
  source            String?           @db.VarChar(50)
  jobGeoId          String?           @map("job_geo_id") @db.VarChar(50)
  createdOn         DateTime          @default(now()) @map("created_on") @db.Timestamp(6)
  updatedOn         DateTime          @default(now()) @updatedAt @map("updated_on") @db.Timestamp(6)
  outreach          CompanyOutreach?

  @@map("company")
}

model CompanyOutreach {
  companyOutreachId   BigInt   @id @default(autoincrement()) @map("company_outreach_id")
  companyId           BigInt   @unique @map("company_id")
  status              String   @default("pending") @db.VarChar(50)
  employeesContacted  Int      @default(0) @map("employees_contacted")
  notes               String?
  createdOn           DateTime @default(now()) @map("created_on") @db.Timestamp(6)
  updatedOn           DateTime @default(now()) @updatedAt @map("updated_on") @db.Timestamp(6)
  company             Company  @relation(fields: [companyId], references: [companyId], onDelete: Cascade)

  @@map("company_outreach")
}
